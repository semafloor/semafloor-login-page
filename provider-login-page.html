<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="provider-login-page-theme.html">

<link rel="import" href="../paper-header-panel/paper-header-panel.html">
<link rel="import" href="../paper-toolbar/paper-toolbar.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-checkbox/paper-checkbox.html">
<link rel="import" href="../paper-fab/paper-fab.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">

<link rel="import" href="../iron-image/iron-image.html">
<link rel="import" href="../iron-icons/iron-icons.html">

<link rel="import" href="../neon-animation/neon-animations.html">

<link rel="import" href="../neon-animation/neon-shared-element-animatable-behavior.html">
<link rel="import" href="../neon-animation/animations/hero-animation.html">

<dom-module id="provider-login-page">
  <template>
    <style include="provider-login-page-theme"></style>

    <paper-header-panel class$="flex [[_providerCls]]" mode="waterfall">
      <paper-toolbar id="providerToolbar" class$="tall toolbar-for-[[_providerCls]]">
        <template is="dom-if" if="[[_isFacebook]]" restamp="true">
          <div class="icon-background">
            <div class="icon-background-inset"></div>
          </div>
          <iron-image id="facebokToolbar" class$="[[_providerCls]]-icon"
            data-icon="[[_providerCls]]"
            src="social-sites-icons/facebook.png" preload sizing="cover" fade>
          </iron-image>
        </template>
        <template is="dom-if" if="[[_isTwitter]]" restamp="true">
          <div class="icon-background">
            <div class="icon-background-inset"></div>
          </div>
          <iron-image id="twitterToolbar" class$="[[_providerCls]]-icon"
            data-icon="[[_providerCls]]"
            src="social-sites-icons/twitter.png" preload sizing="cover" fade>
          </iron-image>
        </template>
        <template is="dom-if" if="[[_isGplus]]" restamp="true">
          <div class="icon-background">
            <div class="icon-background-inset gplus-special"></div>
          </div>
          <iron-image id="gplusToolbar" class$="[[_providerCls]]-icon"
            data-icon="[[_providerCls]]"
            src="social-sites-icons/gplus.png" preload sizing="cover" fade>
          </iron-image>
        </template>
        <template is="dom-if" if="[[_isGithub]]" restamp="true">
          <div class="icon-background">
            <div class="icon-background-inset"></div>
          </div>
          <iron-image id="githubToolbar" class$="[[_providerCls]]-icon"
            data-icon="[[_providerCls]]"
            src="social-sites-icons/github.png" preload sizing="cover" fade>
          </iron-image>
        </template>
        <template is="dom-if" if="[[_isEmail]]" restamp="true">
          <div class="icon-background">
            <div class="icon-background-inset"></div>
          </div>
          <iron-image id="emailToolbar" class$="[[_providerCls]]-icon"
            data-icon="[[_providerCls]]"
            src="social-sites-icons/email.png" preload sizing="cover" fade>
          </iron-image>
        </template>
        <div class="flex-auto"></div>
        <paper-icon-button icon="icons:close" on-tap="_goBackLoginPages"></paper-icon-button>
        <div class="provider-name bottom">
          <span>[[providerName]]</span>
        </div>
      </paper-toolbar>

      <div id="providerContent" class="content provider-content">
        <p>
          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci minima natus architecto molestiae, corrupti debitis vitae eveniet dicta. Eligendi, accusamus.
        </p>
        <form id="providerForm" class="provider-login-form" action="index.html" method="post">
          <paper-input name="email" label="Email Address"
            type="text"
            auto-validate
            required
            pattern="\w\S+@\w\S+\.\S+"></paper-input>
          <paper-input name="password" label="Password"
            type="password"
            required></paper-input>
          <paper-checkbox name="remember">Login Automatically</paper-checkbox>
        </form>
        <div class="layout horizontal center-center paper-fab-container">
          <paper-fab icon="icons:send" mini on-tap="_goBackLoginPages"></paper-fab>
        </div>
    </paper-header-panel>

  </template>
  <script>
    Polymer({
      is: 'provider-login-page',

      behaviors: [Polymer.NeonSharedElementAnimatableBehavior],

      properties: {
        providerName: {
          type: String,
        },
        _oldProviderName: String,
        animationConfig: {
          value: function() {
            return {
              'entry': [{
                name: 'hero-animation',
                id: 'loginToProvider',
                toPage: this
              }, {
                name: 'fade-in-animation',
                node: this.$.providerToolbar,
                timing: {
                  // duration: 1000
                }
              }, {
                name: 'fade-in-animation',
                node: this.$.providerContent,
                timing: {
                  delay: 100,
                  // duration: 1000
                }
              }],
              'exit': []
            }
          }
        },
        sharedElements: {
          value: function () {
            return {
              'loginToProvider': this.$.providerToolbar
            }
          }
        },

        _providerCls: {
          type: String,
          computed: '_computedProviderCls(providerName)'
        },
        _isFacebook: {
          type: Boolean,
          value: false
        },
        _isTwitter: {
          type: Boolean,
          value: false
        },
        _isGplus: {
          type: Boolean,
          value: false
        },
        _isGithub: {
          type: Boolean,
          value: false
        },
        _isEmail: {
          type: Boolean,
          value: false
        },

      },

      _computedProviderCls: function(_providerName) {
        // always reset the providerName value.
        this._resetProvider();

        console.log('you must run this everytime!!!', _providerName);
        switch (_providerName) {
          case 'facebook':
            this.set('_isFacebook', true);
            break;
          case 'twitter':
            this.set('_isTwitter', true);
            break;
          case 'gplus':
            this.set('_isGplus', true);
            break;
          case 'github':
            this.set('_isGithub', true);
            break;
          case 'email':
            this.set('_isEmail', true);
            break;
          default:

        }
        return _providerName;
      },
      _resetProvider: function () {

        this.set('_isFacebook', false);
        this.set('_isTwitter', false);
        this.set('_isGplus', false);
        this.set('_isGithub', false);
        this.set('_isEmail', false);
        // switch (_providerName) {
        //   case 'facebook':
        //     this.set('_isFacebook', false);
        //     break;
        //   case 'twitter':
        //     this.set('_isTwitter', false);
        //     break;
        //   case 'gplus':
        //     this.set('_isGplus', false);
        //     break;
        //   case 'github':
        //     this.set('_isGithub', false);
        //     break;
        //   case 'email':
        //     this.set('_isEmail', false);
        //     break;
        //   default:
        // }
      },

      _goBackLoginPages: function (ev) {
        // switch back to providers selection page.
        this.fire('show-login-pages', {fromPage: this.providerName});
      },

    });
  </script>
</dom-module>
